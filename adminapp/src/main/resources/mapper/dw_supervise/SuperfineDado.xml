<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.adminapp.business.dao.dw_supervise.SuperfineDado">
    <select id="listPersonInformation" resultType="com.adminapp.business.entity.dw_supervise.Personinformation">
        select personid AS code,personname AS name,card AS idCardNo,age,gender,facepath AS headUrl,suspectstatus AS state,bailoutbegindate AS execStartDate,
        bailoutenddate AS execEndDate,contact AS phone FROM t_personinformation WHERE sponsoralarm=#{UserId} ORDER BY t_personinformation.personname
    </select>
    <select id="getPrisonSetting" resultType="com.adminapp.model.dw_supervise.PrisonSettingModel">
        select id AS code,settingname AS name,settingcheck AS enable FROM t_prisonsetting WHERE personid=#{personid}
    </select>
    <select id="listLocation" resultType="com.adminapp.model.dw_supervise.ReportLocationModel">
        select * FROM t_location WHERE personid=#{personid}
    </select>
    <select id="listReportSetting" resultType="com.adminapp.business.entity.dw_supervise.ReportSettingsInformation">
        select * FROM t_reportsettings
    </select>
    <select id="listSingin" resultType="com.adminapp.business.entity.dw_supervise.SinginInformation">
        select * FROM t_singin WHERE personid=#{personid} AND type=#{type}
    </select>
    <select id="listCiteRecord" resultType="com.adminapp.business.entity.dw_supervise.SummonsInformation">
        select * FROM t_summons ORDER BY t_summons.summontime DESC
    </select>
    <select id="listKeyCiteRecord" resultType="com.adminapp.business.entity.dw_supervise.SummonsInformation">
        select * FROM t_summons WHERE personname LIKE'%${key}%' ORDER BY t_summons.summontime DESC
    </select>
    <select id="getPersonInformation" resultType="com.adminapp.model.dw_supervise.PersonAllInformationModel">
        select * FROM t_personinformation WHERE personid=#{personid}
    </select>
    <insert id="insertCiteRecord" parameterType="com.adminapp.model.dw_supervise.CiteRecordSubmitModel" useGeneratedKeys="true" keyProperty="date.id">
        insert into t_summons(personid,personname,summontime) VALUES (#{date.personid},#{date.personname},#{date.summonsTime})
    </insert>
    <select id="getLeaveList" resultType="com.adminapp.model.dw_supervise.LeaveListModel">
        select leaveorder AS code,statuscode AS statusCode,states AS status,personname AS applicant,subittimestamp AS applyTimestamp,starttimestamp AS startTimestamp,endtimestamp AS endTimestamp,
        leavedestination AS address,reason,recording AS reasonAudioUrl FROM t_leave ORDER BY t_leave.subittimestamp DESC
    </select>
    <select id="getAuditorList" resultType="com.adminapp.model.dw_supervise.AuditorRecordModel">
        select statuscode AS statusCode,states AS status,auditordatetime AS timestamp,accountname AS person FROM t_auditor WHERE leaveorder=#{leaveOrder} ORDER BY statuscode DESC
    </select>
    <select id="listLeaveType" resultType="com.adminapp.model.dw_supervise.LeaveListModel">
        select leaveorder AS code,statuscode AS statusCode,states AS status,personname AS applicant,subittimestamp AS applyTimestamp,starttimestamp AS startTimestamp,endtimestamp AS endTimestamp,
        leavedestination AS address,reason,recording AS reasonAudioUrl FROM t_leave WHERE statuscode=#{statusCode} ORDER BY t_leave.subittimestamp DESC
    </select>
    <select id="getKeyLeaveList" resultType="com.adminapp.model.dw_supervise.LeaveListModel">
        select leaveorder AS code,statuscode AS statusCode,states AS status,personname AS applicant,subittimestamp AS applyTimestamp,starttimestamp AS startTimestamp,endtimestamp AS endTimestamp,
        leavedestination AS address,reason,recording AS reasonAudioUrl FROM t_leave WHERE personname LIKE'%${key}%' ORDER BY t_leave.subittimestamp DESC
    </select>
    <select id="listKeyLeaveType" resultType="com.adminapp.model.dw_supervise.LeaveListModel">
        select leaveorder AS code,statuscode AS statusCode,states AS status,personname AS applicant,subittimestamp AS applyTimestamp,starttimestamp AS startTimestamp,endtimestamp AS endTimestamp,
        leavedestination AS address,reason,recording AS reasonAudioUrl FROM t_leave WHERE statuscode=#{statusCode} AND personname LIKE'%${key}%' ORDER BY t_leave.subittimestamp DESC
    </select>
    <select id="getLeaveInformation" resultType="com.adminapp.model.dw_supervise.LeaveListModel">
        select leaveorder AS code,statuscode AS statusCode,states AS status,personname AS applicant,subittimestamp AS applyTimestamp,starttimestamp AS startTimestamp,endtimestamp AS endTimestamp,
        leavedestination AS address,reason,recording AS reasonAudioUrl FROM t_leave WHERE leaveorder=#{leaveOrder}
    </select>
    <update id="updateLeaveInformation">
        update t_leave set statuscode=#{statusCode},status=#{status} WHERE leaveorder=#{leaveOrder}
    </update>
    <insert id="insertAuditorInformation">
        insert into t_auditor (leaveorder, userid, leavingmessage, statuscode, states, accountname, auditordatetime) VALUES (#{leaveOrder},#{userId},#{leavingMessage},#{statusCode},#{status},#{accountName},#{auditorDateTime})
    </insert>
    <select id="listSummonSetting" resultType="com.adminapp.business.entity.dw_supervise.ReminderSettingsInformation">
        select * FROM t_remindersettings WHERE code='0000000003'
    </select>
    <select id="listViolationFensInformation" resultType="int">
        select rangefens FROM t_violationfens WHERE violationname=#{violationName} AND code=#{Code}
    </select>
</mapper>