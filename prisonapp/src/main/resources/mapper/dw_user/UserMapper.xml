<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.prisonapp.business.dao.dw_user.UserDao">
    <select id="login" resultType="com.prisonapp.business.entity.dw_user.UserModel" parameterType="String">
        select * from t_user where accountname=#{userName}
    </select>
    <select id="getUser" resultType="com.prisonapp.business.entity.dw_user.UserModel">
        select * from t_user where personid=#{personid}
    </select>

    <select id="getUserInfo" resultType="com.prisonapp.business.entity.dw_user.GetUserInfoModel">
         SELECT t_personinformatio.personid as code,phone as account,t_personinformation.status as status,personname as name,facepath as headUrl,bailoutbegindate as startDate,bailoutenddate as endDate,sponsor as inChargePerson,
         contact as inChargeContract,currentaddress as area  from t_personinformation FULL JOIN t_user ON t_personinformation.personid = t_user.id ::VARCHAR WHERE personid=#{userId}
    </select>

    <select id="modifyPassword" resultType="com.prisonapp.business.entity.dw_user.UserModel">
        select * from t_user where personid =#{userId} and password=#{password}
    </select>

    <update id="upModifyPassword" >
        update t_user set password=#{newPassword} where id::varchar =#{userId}
    </update>
</mapper>