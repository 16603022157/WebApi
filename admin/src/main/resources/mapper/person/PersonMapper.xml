<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.admin.admin.dao.dw_person.PersonDao">
    <insert id="insertPersion" parameterType="com.admin.admin.entity.dw_person.Personinformation">
        INSERT into t_personinformation(personid,personname,gender,age,birthdate,card,workunit,bailoutbegindate,bailoutenddate,sponsor,sponsoralarm,contact,address,wechatnumber,
        qqnumber,status,founderid,foundertime,modifierid,modifiertime,suspectstatus,marriage,policestation,casetype,facepath,persontags,gendercode,beforename,nation,degreeeducation,
        nativeplace,occupation,nationality,registeredarea,permanentaddress,currentaddress,nowaddress,yjsponsoralarm,exectype,keepaddress,appointaddress,province,city,area,
        monitoraddress,suspectstatuscode)
        values (#{personid},#{personname},#{gender},#{age},#{birthdate},#{card},#{workunit},#{bailoutbegindate},#{bailoutenddate},#{sponsor},#{sponsoralarm},#{contact},#{address},
        #{wechatnumber},#{qqnumber},#{status},#{founderid},#{foundertime},#{modifierid},#{modifiertime},#{suspectstatus},#{marriage},#{policestation},#{casetype},#{facepath},
        #{persontags},#{gendercode},#{beforename},#{nation},#{degreeeducation},#{nativeplace},#{occupation},#{nationality},#{registeredarea},#{permanentaddress},#{currentaddress},
        #{nowaddress},#{yjsponsoralarm},#{exectype},#{keepaddress},#{appointaddress},#{province},#{city},#{area},#{monitoraddress},#{suspectstatuscode})
    </insert>

    <update id="updatePersion" parameterType="com.admin.admin.entity.dw_person.Personinformation">
        UPDATE t_personinformation set personname=#{personname},gender=#{gender},age=#{age},birthdate=#{birthdate},card=#{card},workunit=#{workunit},bailoutbegindate=#{bailoutbegindate},
        bailoutenddate=#{bailoutenddate},sponsor=#{sponsor},sponsoralarm=#{sponsoralarm},contact=#{contact},address=#{address},wechatnumber=#{wechatnumber},qqnumber=#{qqnumber},status=#{status},
        founderid=#{founderid},foundertime=#{foundertime},modifierid=#{modifierid},modifiertime=#{modifiertime},suspectstatus=#{suspectstatus},marriage=#{marriage},policestation=#{policestation},
        casetype=#{casetype},facepath=#{facepath},persontags=#{persontags},gendercode=#{gendercode},beforename=#{beforename},nation=#{nation},degreeeducation=#{degreeeducation},
        nativeplace=#{nativeplace},occupation=#{occupation},nationality=#{nationality},registeredarea=#{registeredarea},permanentaddress=#{permanentaddress},currentaddress=#{currentaddress},
        nowaddress=#{nowaddress},yjsponsoralarm=#{yjsponsoralarm},exectype=#{exectype},keepaddress=#{keepaddress},appointaddress=#{appointaddress},province=#{province},city=#{city},
        area=#{area},monitoraddress=#{monitoraddress},suspectstatuscode=#{suspectstatuscode}
        where personid=#{personid}
    </update>

    <update id="deletePersion">
        update t_personinformation set status=#{flag} where personid=#{PersonId}
    </update>

    <select id="getPersoin" parameterType="String" resultType="com.admin.admin.entity.dw_person.Personinformation">
        select * from t_personinformation where personid=#{id}
    </select>

    <select id="getPersonByCard" parameterType="String" resultType="int">
        select count(*) from t_personinformation where card=#{Card}
    </select>
    <update id="updateSponsor" parameterType="String">
        update t_personinformation set sponsor=#{Name},sponsoralarm=#{id} where personid=#{PersonId}
    </update>

    <insert id="insertprison" parameterType="com.admin.admin.entity.dw_prisonsetting.TPrisonsetting"
            useGeneratedKeys="true" keyProperty="id">
        insert into t_prisonsetting(personid, settingname, settingcheck, settingtime) values(#{data.personid},#{data.settingname},#{data.settingcheck},#{data.settingtime})
    </insert>

    <select id="ListPerson" parameterType="com.admin.model.search.SearchModel"
            resultType="com.admin.admin.entity.dw_person.Personinformation">
        select * from t_personinformation
        <if test=" FuzzyCondition !=null and FuzzyCondition !=''">
            <where>
                personname like concat('%',#{FuzzyCondition},'%') or
                suspectstatus like concat('%',#{FuzzyCondition},'%') or
                gender like concat('%',#{FuzzyCondition},'%') or
                sponsor like concat('%',#{FuzzyCondition},'%') or
                casetype like concat('%',#{FuzzyCondition},'%') or
                modifierid like concat('%',#{FuzzyCondition},'%')
            </where>
        </if>
        <if test="list.size()>0">
            where personid in
            <foreach collection="list" item="id" index="index" open="(" close=")" separator=",">
                CAST (#{id} as text)
            </foreach>
        </if>

    </select>

    <select id="ListPrison" parameterType="String" resultType="com.admin.admin.entity.dw_prisonsetting.TPrisonsetting">
        select * from t_prisonsetting where personid=#{PersonId}
    </select>


</mapper>